{"ast":null,"code":"var _jsxFileName = \"/Users/rubencastroespinoza/Development/Learning /TinyHouseV1/client/src/sections/Listings/Listings.tsx\";\nimport React from \"react\";\nimport { useQuery, useMutation } from \"react-apollo\";\nimport { gql } from 'apollo-boost';\nconst LISTINGS = gql`\n    query Listings {\n        listings {\n            id \n            title\n            image \n            address\n            price \n            numOfGuests\n            numOfBeds\n            numOfBaths\n            rating\n            favored\n            bookings\n        }\n    }\n`;\nconst DELETE_LISTING = gql`\n    mutation DeleteListing($id: ID!) {\n      deleteListing(id: $id) {\n        id\n      }\n    }\n`;\nexport const Listings = ({\n  title\n}) => {\n  const {\n    data,\n    loading,\n    error,\n    refetch\n  } = useQuery(LISTINGS);\n  const [deleteListing, {\n    loading: deleteListingLoading,\n    error: deleteListingError\n  }] = useMutation(DELETE_LISTING);\n\n  const handleDeleteListing = async id => {\n    await deleteListing({\n      variables: {\n        id\n      }\n    });\n    refetch();\n  };\n\n  const listings = data ? data.listings : null;\n  const listingsList = listings ? /*#__PURE__*/React.createElement(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 5\n    }\n  }, listings.map(listing => {\n    return /*#__PURE__*/React.createElement(\"li\", {\n      key: listing.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 11\n      }\n    }, listing.title, /*#__PURE__*/React.createElement(\"button\", {\n      onClick: () => handleDeleteListing(listing.id),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 13\n      }\n    }, \"Delete\"));\n  })) : null;\n\n  if (loading) {\n    return /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 12\n      }\n    }, \"Loading...\");\n  }\n\n  if (error) {\n    return /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 12\n      }\n    }, \"Something went wrong. Please try again later\");\n  }\n\n  const deleteListingLoadingMessage = deleteListingLoading ? /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 5\n    }\n  }, \"Deletion in progress\") : null;\n  const deleteListingErrorMessage = deleteListingError ? /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 5\n    }\n  }, \"Something went Wrong Please Try Again Later\") : null;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }\n  }, title), listingsList, deleteListingErrorMessage, deleteListingLoadingMessage);\n};","map":{"version":3,"sources":["/Users/rubencastroespinoza/Development/Learning /TinyHouseV1/client/src/sections/Listings/Listings.tsx"],"names":["React","useQuery","useMutation","gql","LISTINGS","DELETE_LISTING","Listings","title","data","loading","error","refetch","deleteListing","deleteListingLoading","deleteListingError","handleDeleteListing","id","variables","listings","listingsList","map","listing","deleteListingLoadingMessage","deleteListingErrorMessage"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,QAAT,EAAmBC,WAAnB,QAAsC,cAAtC;AAMA,SAAQC,GAAR,QAAkB,cAAlB;AACA,MAAMC,QAAQ,GAAGD,GAAI;;;;;;;;;;;;;;;;CAArB;AAkBA,MAAME,cAAc,GAAGF,GAAI;;;;;;CAA3B;AAYA,OAAO,MAAMG,QAAQ,GAAG,CAAC;AAAEC,EAAAA;AAAF,CAAD,KAAsB;AAC5C,QAAM;AAAEC,IAAAA,IAAF;AAAQC,IAAAA,OAAR;AAAiBC,IAAAA,KAAjB;AAAwBC,IAAAA;AAAxB,MAAoCV,QAAQ,CAAeG,QAAf,CAAlD;AAEA,QAAM,CACJQ,aADI,EAEJ;AAAEH,IAAAA,OAAO,EAAEI,oBAAX;AAAiCH,IAAAA,KAAK,EAAEI;AAAxC,GAFI,IAGFZ,WAAW,CAA4CG,cAA5C,CAHf;;AAKA,QAAMU,mBAAmB,GAAG,MAAOC,EAAP,IAAsB;AAChD,UAAMJ,aAAa,CAAC;AAACK,MAAAA,SAAS,EAAC;AAACD,QAAAA;AAAD;AAAX,KAAD,CAAnB;AACAL,IAAAA,OAAO;AACR,GAHD;;AAKA,QAAMO,QAAQ,GAAGV,IAAI,GAAGA,IAAI,CAACU,QAAR,GAAmB,IAAxC;AAEA,QAAMC,YAAY,GAAGD,QAAQ,gBAC3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGA,QAAQ,CAACE,GAAT,CAAcC,OAAD,IAAa;AACzB,wBACE;AAAI,MAAA,GAAG,EAAEA,OAAO,CAACL,EAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACGK,OAAO,CAACd,KADX,eAEE;AAAQ,MAAA,OAAO,EAAE,MAAMQ,mBAAmB,CAACM,OAAO,CAACL,EAAT,CAA1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFF,CADF;AAQD,GATA,CADH,CAD2B,GAazB,IAbJ;;AAeA,MAAIP,OAAJ,EAAa;AACX,wBAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAAP;AACD;;AAED,MAAIC,KAAJ,EAAW;AACT,wBAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sDAAP;AACD;;AAED,QAAMY,2BAA2B,GAAGT,oBAAoB,gBACtD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BADsD,GAEpD,IAFJ;AAIA,QAAMU,yBAAyB,GAAGT,kBAAkB,gBAClD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mDADkD,GAEhD,IAFJ;AAIA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAKP,KAAL,CADF,EAEGY,YAFH,EAGGI,yBAHH,EAIGD,2BAJH,CADF;AAQD,CAtDM","sourcesContent":["import React from \"react\";\nimport { useQuery, useMutation } from \"react-apollo\";\nimport {\n  ListingsData,\n  DeleteListingData,\n  DeleteListingVariables,\n} from \"./types\";\nimport {gql} from 'apollo-boost'\nconst LISTINGS = gql`\n    query Listings {\n        listings {\n            id \n            title\n            image \n            address\n            price \n            numOfGuests\n            numOfBeds\n            numOfBaths\n            rating\n            favored\n            bookings\n        }\n    }\n`;\n\nconst DELETE_LISTING = gql`\n    mutation DeleteListing($id: ID!) {\n      deleteListing(id: $id) {\n        id\n      }\n    }\n`;\n\ninterface Props {\n  title: string;\n}\n\nexport const Listings = ({ title }: Props) => {\n  const { data, loading, error, refetch } = useQuery<ListingsData>(LISTINGS);\n\n  const [\n    deleteListing,\n    { loading: deleteListingLoading, error: deleteListingError },\n  ] = useMutation<DeleteListingData, DeleteListingVariables>(DELETE_LISTING);\n\n  const handleDeleteListing = async (id: string) => {\n    await deleteListing({variables:{id}});\n    refetch();\n  };\n\n  const listings = data ? data.listings : null;\n\n  const listingsList = listings ? (\n    <ul>\n      {listings.map((listing) => {\n        return (\n          <li key={listing.id}>\n            {listing.title}\n            <button onClick={() => handleDeleteListing(listing.id)}>\n              Delete\n            </button>\n          </li>\n        );\n      })}\n    </ul>\n  ) : null;\n\n  if (loading) {\n    return <h2>Loading...</h2>;\n  }\n\n  if (error) {\n    return <h2>Something went wrong. Please try again later</h2>;\n  }\n\n  const deleteListingLoadingMessage = deleteListingLoading ? (\n    <h4>Deletion in progress</h4>\n  ) : null;\n\n  const deleteListingErrorMessage = deleteListingError ? (\n    <h4>Something went Wrong Please Try Again Later</h4>\n  ) : null;\n\n  return (\n    <div>\n      <h2>{title}</h2>\n      {listingsList}\n      {deleteListingErrorMessage}\n      {deleteListingLoadingMessage}\n    </div>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}