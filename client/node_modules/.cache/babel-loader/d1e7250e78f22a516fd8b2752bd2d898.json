{"ast":null,"code":"var _jsxFileName = \"/Users/rubencastroespinoza/Development/Learning /TinyHouseV1/client/src/sections/Listings/Listings.tsx\";\nimport React from \"react\";\nimport { useQuery, useMutation } from \"react-apollo\";\nimport { Avatar, Button, List, Spin } from \"antd\";\nimport { gql } from \"apollo-boost\";\nimport { ListingsSkeleton } from \"./components\";\nimport \"./styles/Listings.css\";\nconst LISTINGS = gql`\n  query Listings {\n    listings {\n      id\n      title\n      image\n      address\n      price\n      numOfGuests\n      numOfBeds\n      numOfBaths\n      rating\n      favored\n      bookings\n    }\n  }\n`;\nconst DELETE_LISTING = gql`\n  mutation DeleteListing($id: ID!) {\n    deleteListing(id: $id) {\n      id\n    }\n  }\n`;\nexport const Listings = ({\n  title\n}) => {\n  const {\n    data,\n    loading,\n    error,\n    refetch\n  } = useQuery(LISTINGS);\n  const [deleteListing, {\n    loading: deleteListingLoading,\n    error: deleteListingError\n  }] = useMutation(DELETE_LISTING);\n\n  const handleDeleteListing = async id => {\n    await deleteListing({\n      variables: {\n        id\n      }\n    });\n    refetch();\n  };\n\n  const listings = data ? data.listings : null;\n  const listingsList = listings ? /*#__PURE__*/React.createElement(List, {\n    itemLayout: \"horizontal\",\n    dataSource: listings,\n    renderItem: listing => /*#__PURE__*/React.createElement(List.Item, {\n      actions: [/*#__PURE__*/React.createElement(Button, {\n        type: \"primary\",\n        onClick: () => handleDeleteListing(listing.id),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 13\n        }\n      }, \"Delete\")],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(List.Item.Meta, {\n      title: listing.title,\n      description: listing.address,\n      avatar: /*#__PURE__*/React.createElement(Avatar, {\n        src: listing.image,\n        shape: \"square\",\n        size: 48,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 21\n        }\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 11\n      }\n    })),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 5\n    }\n  }) : null;\n\n  if (loading) {\n    return /*#__PURE__*/React.createElement(ListingsSkeleton, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 12\n      }\n    });\n  }\n\n  if (error) {\n    return /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 12\n      }\n    }, \"Something went wrong. Please try again later\");\n  }\n\n  const deleteListingLoadingMessage = deleteListingLoading ? /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 5\n    }\n  }, \"Deletion in progress\") : null;\n  const deleteListingErrorMessage = deleteListingError ? /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 5\n    }\n  }, \"Something went Wrong Please Try Again Later\") : null;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"listings\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Spin, {\n    spinning: deleteListingLoading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 9\n    }\n  }, title), listingsList, deleteListingErrorMessage));\n};","map":{"version":3,"sources":["/Users/rubencastroespinoza/Development/Learning /TinyHouseV1/client/src/sections/Listings/Listings.tsx"],"names":["React","useQuery","useMutation","Avatar","Button","List","Spin","gql","ListingsSkeleton","LISTINGS","DELETE_LISTING","Listings","title","data","loading","error","refetch","deleteListing","deleteListingLoading","deleteListingError","handleDeleteListing","id","variables","listings","listingsList","listing","address","image","deleteListingLoadingMessage","deleteListingErrorMessage"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { useQuery, useMutation } from \"react-apollo\";\nimport { Listings as ListingsData } from \"./__generated__/Listings\";\nimport {\n  DeleteListing as DeleteListingData,\n  DeleteListingVariables,\n} from \"./__generated__/DeleteListing\";\n\nimport { Avatar, Button, List, Spin } from \"antd\";\nimport { gql } from \"apollo-boost\";\nimport { ListingsSkeleton } from \"./components\";\nimport \"./styles/Listings.css\";\n\nconst LISTINGS = gql`\n  query Listings {\n    listings {\n      id\n      title\n      image\n      address\n      price\n      numOfGuests\n      numOfBeds\n      numOfBaths\n      rating\n      favored\n      bookings\n    }\n  }\n`;\n\nconst DELETE_LISTING = gql`\n  mutation DeleteListing($id: ID!) {\n    deleteListing(id: $id) {\n      id\n    }\n  }\n`;\n\ninterface Props {\n  title: string;\n}\n\nexport const Listings = ({ title }: Props) => {\n  const { data, loading, error, refetch } = useQuery<ListingsData>(LISTINGS);\n\n  const [\n    deleteListing,\n    { loading: deleteListingLoading, error: deleteListingError },\n  ] = useMutation<DeleteListingData, DeleteListingVariables>(DELETE_LISTING);\n\n  const handleDeleteListing = async (id: string) => {\n    await deleteListing({ variables: { id } });\n    refetch();\n  };\n\n  const listings = data ? data.listings : null;\n\n  const listingsList = listings ? (\n    <List\n      itemLayout=\"horizontal\"\n      dataSource={listings}\n      renderItem={(listing) => (\n        <List.Item\n          actions={[\n            <Button\n              type=\"primary\"\n              onClick={() => handleDeleteListing(listing.id)}\n            >\n              Delete\n            </Button>,\n          ]}\n        >\n          <List.Item.Meta\n            title={listing.title}\n            description={listing.address}\n            avatar={<Avatar src={listing.image} shape=\"square\" size={48} />}\n          />\n        </List.Item>\n      )}\n    />\n  ) : null;\n\n  if (loading) {\n    return <ListingsSkeleton/>;\n  }\n\n  if (error) {\n    return <h2>Something went wrong. Please try again later</h2>;\n  }\n\n  const deleteListingLoadingMessage = deleteListingLoading ? (\n    <h4>Deletion in progress</h4>\n  ) : null;\n\n  const deleteListingErrorMessage = deleteListingError ? (\n    <h4>Something went Wrong Please Try Again Later</h4>\n  ) : null;\n\n  return (\n    <div className=\"listings\">\n      <Spin spinning={deleteListingLoading}>\n        <h2>{title}</h2>\n        {listingsList}\n        {deleteListingErrorMessage}\n      </Spin>\n    </div>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}